{% load static generals_tag i18n %}
<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <title>{% get_settings_first as settings %}{{settings.name}} - {% block title %}{% endblock title %}</title>
    <meta content="{% block description %}{% endblock description %}" name="description">
    <meta property="og:title" content="{% block propertytitle %} {% endblock propertytitle %}">
    <meta property="og:description" content="{% block propertydescription %}{% endblock propertydescription %}">
    <meta property="og:image" content="{% block propertyimage %}{% endblock propertyimage %}">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="{% if settings.favicon %}{{settings.favicon.url}}{% endif %}" />
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome для иконок -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'site/css/style.css' %}">

    {% block head %}{% endblock head %}
</head>
<body>
<!-- Верхняя панель -->
<div class="topbar" id="topbar">
    <div class="menu-toggle">
        <div class="logo-container">
            <!-- Замените src на путь к вашему логотипу -->
            <img src="{% static 'images/logo.png' %}" alt="Логотип" class="logo" onerror="this.style.display='none'">
        </div>
        <label class="toggle-switch">
            <input type="checkbox" id="menuToggle">
            <span class="toggle-slider"></span>
        </label>
    </div>
    <div class="topbar-actions">
        {% block menu_right %} {% endblock menu_right %}
    </div>
</div>
<!-- Боковая панель -->
{% include 'menu.html' %}
<!-- Основной контент -->
<div class="content" id="content">
    <div class="content-header"  id="content-body">
        {% block content %} {% endblock content %}
    </div>
</div>
{% block footer_top %}{% endblock footer_top %}
<script src="{% static 'site/htmx.min.js' %}"></script>
<!-- Bootstrap 5 JS с Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script src="{% static 'site/js/script.js' %}"></script>
{% block footer_bottom %}{% endblock footer_bottom %}
<script>
    function goBack() {
        window.history.back();
    }
</script>
<script>
    document.addEventListener('htmx:afterSwap', function (event) {
        // При каждой смене контента обновляем URL
        var currentUrl = window.location.href;
        document.getElementById('back-link').href = currentUrl;

    });

    // Обработчик события popstate
    window.addEventListener('popstate', function (event) {
        // При нажатии кнопки "назад" браузера симулируем клик по ссылке "Назад"
        document.getElementById('back-link').click();
    });
</script>
</body>
</html>